# ClientID enforcement
1. Updating RAML specification to support client_id enforcement
    * Add a traits in Design Center
    ![image](https://user-images.githubusercontent.com/7286649/100786273-ed7c4500-33df-11eb-91f8-3dfd563944c0.png)

    * Reference it in Root file & Add it to the routes which we want to secure
    ![image](https://user-images.githubusercontent.com/7286649/100786420-20263d80-33e0-11eb-80df-1396b9d26959.png)

    * Publish the specification to Exchange
    ![image](https://user-images.githubusercontent.com/7286649/100143307-24dc7600-2e63-11eb-8f2b-54ebdf801f0d.png)

    * Download latest RAML in Anypoint Studio
        - Right Click Project > Anypoitn Platform > Download RAML fron Design Center > Authenticate ( Might be required ) > And Chose the API from the list of APIs
        ![image](https://user-images.githubusercontent.com/7286649/100147055-d03bf980-2e68-11eb-8169-4090e09c3b1a.png)
        - Choose Yes from the prompt to Override resources
    * At this point you may want to run the app and see if it is working as expected
2. Setting up Autodiscovery
    * Log on to Anypoint Platform > API Manager > Manage API > Manage API From Exchange > Find the API you created, and make sure to check the box saying you are using Mule 4 and above > Click Save, then click on the API and copy and paste the Autodiscovery API ID
    ![image](https://user-images.githubusercontent.com/7286649/100124455-ac1cf000-2e49-11eb-912d-9160a32b04f9.png)
    ![image](https://user-images.githubusercontent.com/7286649/100147287-2741ce80-2e69-11eb-8e8e-b51c5cd21711.png)
    * Setup Autodiscovery in project within Anypoint Studio 
        - Go to Global Elements > Click Create > Search for Autodiscovery > Paste in your API ID into the window and select your main flow under flow name.
        ![image](https://user-images.githubusercontent.com/7286649/100147843-e5fdee80-2e69-11eb-952e-7d3e1e5ccd15.png)
         - Now right click on your project folder, and click Anypoint Platform, Deploy to Cloudhub.
        - In order for API to autodiscover, we need to include our anypoint platform client ID and secret under Properties upon deployment. See the screenshot below.
        ![image](https://user-images.githubusercontent.com/7286649/100148259-83592280-2e6a-11eb-9c99-cb60a13c7e35.png)
        - Finally, click the deploy button! Nice work.
        - Note : To find your client id and secret, go to Anypoint Platform, navigate to Access Management, Environments, and click on whatever environment you are deploying on (whether that is Sandbox, Production etc), and copy and paste your client id and secret into the corresponding fields on the deployment screen.
3. Applying the Client ID Enforcement Policy
    * Navigate to Anypoint Platform, and go to API Manager. Click on your now Active API and got to Policies, then click the Apply New Policy button. Select the Client ID enforcement policy, leave all the settings as default.
    ![image](https://user-images.githubusercontent.com/7286649/100149928-db912400-2e6c-11eb-835f-73bfe5c51d1f.png)
